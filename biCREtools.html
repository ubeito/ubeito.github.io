<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
    <title>biCREtools</title>
	<script src="biCREtoolsJS.js"></script>
</head>
<body>
	<img src="pukiwiki.png" width="1.2%"> <b> Bilaterally Colored Regular Expression Engine Demo (ver.2) </b>	
	<p style="margin-top: 8px;margin-bottom: 8px;">
		<label>biCRE: <input type="text" id="bicreText" size="80" style="height:30px;font-size:large;background-color:#FFCCFF" >
		</label>
	</p>
	<input type="button" id="btn1" value="Get follow (& token) function" onclick="onclickBtn1()" /> 
	<input type="button" id="btn7" value="Show decomposed expressions" onclick="onclickBtn7()" /> 
	<input type="button" id="btn2" value="Download position ε-automaton (gv)" onclick="onclickBtn2()" disabled = "true" />
	<input type="button" id="btn5" value="Clear" onclick="onclickBtn5()" /> 
	<p style="margin-top: 8px;margin-bottom: 8px;">
		<label>input:  <input type="text" id="stringText" size="81" style="height:30px;font-size:large;background-color:#FFCCFF" >
		</label>
	</p>
	<input type="button" id="btn3" value="Run" onclick="onclickBtn3()" disabled = "true" /> 
	<input type="button" id="btn4" value="Show all kinds of acceptance" onclick="onclickBtn4()" disabled = "true" />
	<input type="button" id="btn6" value="Clear" onclick="onclickBtn6()" /> 
	<p style="margin-top: 8px;margin-bottom: 8px;">
		<textarea id="textarea" value="1" cols="100" rows="50" readonly style="background-color:#99FFFF; font-family:Courier New,Consolas,monospace;"></textarea>
	</p>

<script type="text/javascript">
	let bText = document.getElementById('bicreText');
	bText.value = ":>^R[+-]:>^C[0-9]*(\\.[0-9]|[0-9]<:_G\\.)[0-9]*<:_B"; // ":>[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?<:\\.)*";
	let sText = document.getElementById('stringText');
	sText.value = "+12\.34"; // "a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-@a-zA-Z0-9.a-zA-Z0-9.a-zA-Z0-9";
	function onclickBtn5() {
		bText.value = "";
	}
	function onclickBtn6() {
		sText.value = "";
	}
	function onclickBtn1() {
		document.getElementById('textarea').value += getFollowstr(bicreText.value)
		btn2.disabled = false;
		btn3.disabled = false;
		btn4.disabled = false;
	}
	function onclickBtn7() {
		document.getElementById('textarea').value += getREstrs(bicreText.value)
	}
	function onclickBtn2() {
        var gvtext = getPoseautostr();
		var gvfname = "poseautodiag" + ".gv";
		// document.getElementById('textarea').value += gvtext;
		document.getElementById('textarea').value += "position ε-automaton file " + gvfname + " created.\n\n";
		download(gvfname, gvtext);
	}
	function onclickBtn3() {
		document.getElementById('textarea').value += getRunresultstr(stringText.value)
	}
	function onclickBtn4() {
		document.getElementById('textarea').value += getAllkindsstr()
	}
	function download(filename, textInput) {
		var element = document.createElement('a');
		element.setAttribute('href','data:text/plain;charset=utf-8, ' + encodeURIComponent(textInput));
		element.setAttribute('download', filename);
		document.body.appendChild(element);
		element.click();
		//document.body.removeChild(element);
	}
	</script>
<body>
</body>
</html>
